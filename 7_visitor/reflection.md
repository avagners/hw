# Истинное наследование

## До
Привычная реализация. 
Есть один АТД, от которого наследуются остальные классы. 
Каждая фигура реализует свои методы по подсчету площади и периметру.
Данные и методы инкапсулированы в одном объекте.


## После
Методы подсчета площади и периметра вынесены в отдельный модуль.  
Классы фигур реализуют только доступ к состоянию объекта для "посетителя".  
В посетителе реализован метод подсчета площади и периметра.  
Таким образом методы отделены от данных.   

Минусы:  
- усложняется архитектура (больше классов) - возможно, просто непривычно;
- для тех, кто не знаком с паттерном, сложно понять как посчитать площадь и периметр фигур;

Плюсы:    
- "истинное" наследование;
- разделение ответственности: паттерн разделяет ответственность за операции над объектами от структуры объектов. Каждая операция реализуется в отдельном классе посетителя, что делает систему более модульной;
- простое добавление новых операций и объектов без изменения существующего кода: добавление новых операций (новых посетителей) и новых объектов (новых классов фигур) становится простым и не требует изменения кода существующих классов;
- посетитель объединяет родственные операции в одном классе;

---
## Выводы  
Сначала было довольно сложно понять паттерн. Он показался неоправданно сложным, избыточным.  
"Испугало" нарушение инкапсуляции - отделение методов от данных.  
Но после написания примера преимущества паттерна сразу бросились в глаза. Эти преимущества возрастают с увеличением иерархии объектов.
Архитектура становится более модульной.