# Думаем на уровне дизайна

**До**:  
Написал тесты в привычном для себя виде, объединив их по проверяемому состоянию объекта: пустой стек, стек с единичным значением, стек с множеством значений. Итого получилось 3 класса тестов: `TestStackEmpty`, `TestStackOneItem`, `TestStackManyItems`. В каждом классе были написаны тесты для каждого метода из АТД. При этом в голове была крепкая связь тестов и реализации. Теряется из фокуса внимания АТД (*"в 99% неосознанно, поэтому постоянно путая и смешивая эти уровни"*).

**После**:  
Написал тесты согласно интерфейсу/дизайну описанному в АТД (*"Мы всегда рассматриваем только те "активности" программы, которые определены спецификацией"*). То есть я писал тесты последовательно как они написаны в АТД с указанием пост- и пред- условий, не думая о реализации. В тестах сразу описал все ожидания по каждому методу. 

В итоге получился один класс `TestStack`, где более логичный и понятный код. Структура тестов соответствует структуре АТД (*"Делайте дизайн по возможности явно видимым в коде"*). 
Код теста одного метода из АТД находится в одном месте и не разбросан в множестве классов. Такой подход более гармонично укладывается в итоговую систему разработки. Было проще думать. АТД всегда остается в фокусе внимания - как при написании тестов, так и при выполнении реализации (*"Код не должен следовать тестам, ни тесты не должны следовать коду. И тесты, и код должны следовать дизайну, логической архитектуре."*). Также обратил внимания на возрастающую роль качественно написанных пост- и пред- условий в АТД (*"очень важно выносить в сознательное понимание то, что не удаётся, что невозможно документировать на первом и втором уровнях"*).


